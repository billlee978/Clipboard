import{s as d}from"./axios-Tk7nayK7.js";import{_ as T,r as i,s as w,u as x,b as o,c as a,e as t,F as _,j as v,n as B,t as m}from"./index-nOuLH-jF.js";const S={class:"wrapper"},D={class:"upload-file"},E={class:"item"},I={class:"download-file"},G={class:"item"},L={class:"action"},$=["onClick"],j=["onClick"],z={__name:"file",setup(A){const u=i([]),c=i([]),{token:n,tokenModal:h}=w(x()),s=i(null),p=i(null),k=()=>{p.value.click()},b=e=>{s.value=e.target.files[0],g()},g=()=>{if(!s.value)return;const e=new FormData;e.append("file",s.value),d({method:"POST",url:"upload/"+n.value,headers:{"Content-Type":"multipart/form-data"},data:e}).then(r=>{u.value.push({name:s.value.name,status:!0})}).catch(r=>{u.value.push({name:s.value.name,status:!1}),alert("文件上传失败")})};function f(){n.value!==""?(c.value=[],d({method:"GET",url:"get/file/"+n.value}).then(e=>{e.files!==null?c.value=e.files:alert("当前Token下没有文件!")})):(alert("请先设置Token值!"),h.value=!0)}function y(e){window.open("/download/file/"+n.value+"/"+e,"_blank")}function C(e){d({method:"GET",url:"delete/file/"+n.value+"/"+e}).then(r=>{f()})}return(e,r)=>(o(),a("div",S,[t("div",D,[t("input",{type:"file",ref_key:"fileInput",ref:p,style:{display:"none"},onChange:b},null,544),t("button",{onClick:k,class:"button",style:{"margin-top":"10px"}},"Upload File"),(o(!0),a(_,null,v(u.value,l=>(o(),a("div",E,[t("p",{style:B({color:l.status?"green":"red"})},m(l.name),5)]))),256))]),t("div",I,[t("button",{class:"button",onClick:f,style:{"margin-top":"10px"}},"获取当前Token下所有文件"),(o(!0),a(_,null,v(c.value,l=>(o(),a("div",G,[t("p",null,m(l),1),t("div",L,[t("button",{class:"button",onClick:F=>y(l)},"下载",8,$),t("button",{class:"button-delete",onClick:F=>C(l)},"删除",8,j)])]))),256))])]))}},O=T(z,[["__scopeId","data-v-d725d2ea"]]);export{O as default};
