import{m as c,s as u}from"./axios-_tvyvdIy.js";import{_ as x,r as m,s as S,u as F,b as d,c as _,e as v,f as y,g as t,k as E,F as $,l as B,m as L,t as A,p as G,j as M}from"./index-u-I4q2PK.js";const N=n=>(G("data-v-107f1f65"),n=n(),M(),n),V={class:"wrapper"},j={class:"upload-file"},q=N(()=>t("button",{class:"button",style:{"margin-top":"10px"}}," 点击上传 ",-1)),D={class:"download-file"},H={class:"item"},I={class:"action"},O=["onClick"],P=["onClick"],R={__name:"file",setup(n){const[a,h]=c.useMessage(),i=m([]),r=m([]),{token:s,tokenModal:f}=S(F());function k(e){s.value!==""?u({method:"POST",url:"upload/"+s.value,headers:{"Content-Type":"multipart/form-data"},data:e}).then(o=>{o===200?e.onSuccess("done",e):e.onError("error")}):(a.error("请先设置Token值!"),f.value=!0,i.value=[])}function p(){s.value!==""?(r.value=[],u({method:"GET",url:"get/file/"+s.value}).then(e=>{e.files!==null?r.value=e.files:a.error("当前Token下没有文件!")})):(a.error("请先设置Token值!"),f.value=!0)}function g(e){window.open("/download/file/"+s.value+"/"+e,"_blank")}function b(e){u({method:"GET",url:"delete/file/"+s.value+"/"+e}).then(o=>{p()})}const C=e=>{e.file.status==="done"?c.success(`${e.file.name} 上传成功`):e.file.status==="error"&&c.error(`${e.file.name} 上传失败`)};return(e,o)=>{const T=L;return d(),_("div",V,[v(y(h)),t("div",j,[v(T,{"file-list":i.value,"onUpdate:fileList":o[0]||(o[0]=l=>i.value=l),name:"file","custom-request":k,onChange:C},{default:E(()=>[q]),_:1},8,["file-list"])]),t("div",D,[t("button",{class:"button",onClick:p,style:{"margin-top":"10px"}},"获取当前Token下所有文件"),(d(!0),_($,null,B(r.value,l=>(d(),_("div",H,[t("p",null,A(l),1),t("div",I,[t("button",{class:"button",onClick:w=>g(l)},"下载",8,O),t("button",{class:"button-delete",onClick:w=>b(l)},"删除",8,P)])]))),256))])])}}},J=x(R,[["__scopeId","data-v-107f1f65"]]);export{J as default};
